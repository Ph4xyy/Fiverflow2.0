import{j as e,l as g,m as u,n as b,T as h,b as p,a as f,r as j}from"./index-D6LT2v2_.js";import{u as v}from"./useInvoiceTemplates-Dz5JZRs8.js";import"./jspdf.es.min-B8RMXKW2.js";const y=({template:r,onEdit:s,onDuplicate:d,onDelete:l,onSetDefault:i})=>e.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 overflow-hidden",children:[e.jsx("div",{className:"h-40 bg-gradient-to-br from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-900 flex items-center justify-center text-sm text-slate-500",children:"Aperçu"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:r.name}),e.jsxs("button",{onClick:()=>i(r.id),className:`inline-flex items-center px-2 py-1 rounded-md text-xs ${r.is_default?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300":"bg-gray-100 text-gray-700 dark:bg-slate-800 dark:text-slate-300"}`,title:r.is_default?"Modèle par défaut":"Définir par défaut",children:[e.jsx(g,{className:"w-3.5 h-3.5 mr-1"}),r.is_default?"Par défaut":"Définir"]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>s(r.id),className:"inline-flex items-center px-2.5 py-1.5 rounded-lg border border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-800 text-gray-700 dark:text-gray-200 text-sm",children:[e.jsx(u,{className:"w-4 h-4 mr-1"})," Éditer"]}),e.jsxs("button",{onClick:()=>d(r.id),className:"inline-flex items-center px-2.5 py-1.5 rounded-lg border border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-800 text-gray-700 dark:text-gray-200 text-sm",children:[e.jsx(b,{className:"w-4 h-4 mr-1"})," Dupliquer"]}),e.jsxs("button",{onClick:()=>l(r.id),className:"inline-flex items-center px-2.5 py-1.5 rounded-lg border border-red-200 dark:border-red-800 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 text-sm",children:[e.jsx(h,{className:"w-4 h-4 mr-1"})," Supprimer"]})]})]})]}),C=()=>{const{user:r}=p(),s=f(),[d,l]=j.useState(""),{items:i,loading:n,create:o,duplicate:c,remove:m,setDefault:x}=v(r==null?void 0:r.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Templates de facture"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Créez, éditez et sélectionnez votre modèle par défaut."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:d,onChange:a=>l(a.target.value),placeholder:"Nom du template",className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-900"}),e.jsx("button",{onClick:async()=>{const a=(d||"").trim()||"Nouveau template",t=await o(a);l(""),s(`/invoices/templates/${t.id}`)},className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700",children:"Créer"})]})]}),n?e.jsxs("div",{className:"p-10 flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-7 w-7 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Chargement…"})]}):i.length===0?e.jsx("div",{className:"p-10 rounded-xl border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-center",children:"Aucun template pour l’instant. Créez votre premier modèle !"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(a=>e.jsx(y,{template:a,onEdit:t=>s(`/invoices/templates/${t}`),onDuplicate:c,onDelete:t=>m(t),onSetDefault:x},a.id))})]})};export{C as default};
